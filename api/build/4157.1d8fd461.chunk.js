(self.webpackChunkapi=self.webpackChunkapi||[]).push([[4157],{58616:E=>{function m(s,e,r,n){for(var l=s.length,c=r+(n?1:-1);n?c--:++c<l;)if(e(s[c],c,s))return c;return-1}E.exports=m},39024:(E,m,s)=>{var e=s(58616),r=s(88124),n=s(22120);function l(c,f,A){return f===f?n(c,f,A):e(c,r,A)}E.exports=l},94456:E=>{function m(s,e,r,n){for(var l=r-1,c=s.length;++l<c;)if(n(s[l],e))return l;return-1}E.exports=m},88124:E=>{function m(s){return s!==s}E.exports=m},97368:(E,m,s)=>{var e=s(12480),r=s(39024),n=s(94456),l=s(85968),c=s(4288),f=Array.prototype,A=f.splice;function M(T,j,L,G){var x=G?n:r,u=-1,C=j.length,g=T;for(T===j&&(j=c(j)),L&&(g=e(T,l(L)));++u<C;)for(var y=0,v=j[u],$=L?L(v):v;(y=x(g,$,y,G))>-1;)g!==T&&A.call(g,y,1),A.call(T,y,1);return T}E.exports=M},22120:E=>{function m(s,e,r){for(var n=r-1,l=s.length;++n<l;)if(s[n]===e)return n;return-1}E.exports=m},92096:(E,m,s)=>{var e=s(12480),r=s(24020),n=s(22488),l=s(75516);function c(f,A){var M=l(f)?e:n;return M(f,r(A,3))}E.exports=c},39620:(E,m,s)=>{var e=s(41912),r=s(35140),n=e(r);E.exports=n},35140:(E,m,s)=>{var e=s(97368);function r(n,l){return n&&n.length&&l&&l.length?e(n,l):n}E.exports=r},96772:(E,m,s)=>{var e=s(35904);function r(n){var l=n==null?0:n.length;return l?e(n,1,l):[]}E.exports=r},44157:(E,m,s)=>{"use strict";s.d(m,{A:()=>Se});var e=s(19968),r=s(62552),n=s(5e3),l=s(48936),c=s(63358),f=s(28724),A=s(70996),M=s(48112),T=s(28464),j=s(35676),L=s(42816),G=s(42616),x=s(34404),u=s(12248),C=s(32568),g=s(16048),y=s(54223),v=s(14632),$=s(48632),F=s(70516),H=s(49008),I=s(43164),V=s(61952),b=s(71944),z=s(41268),k=s(99620),a=s(33104),se=s(53305),re=s(46596),Y=s(92096),te=s(96772),w=s(69372),Ce=s(76683),le=s(29088),ne=s(39620);const[de,oe]=(0,I.G)("ApiTokenPermissionsContext"),ae=({children:t,...i})=>(0,e.jsx)(de,{...i,children:t}),J=()=>oe("useApiTokenPermissions"),fe=t=>{const i={allActionsIds:[],permissions:[]};return i.permissions=Object.keys(t).map(o=>({apiId:o,label:o.split("::")[1],controllers:Object.keys(t[o].controllers).map(_=>({controller:_,actions:t[o].controllers[_].map(d=>{const O=`${o}.${_}.${d}`;return o.includes("api::")&&i.allActionsIds.push(O),{action:d,actionId:O}}).flat()})).flat()})),i},ce=({errors:t,onChange:i,canEditInputs:o,isCreating:_,values:d,apiToken:O,onDispatch:h,setHasChangedPermissions:N})=>{const{formatMessage:B}=(0,v.c)(),W=({target:{value:K}})=>{N(!1),K==="full-access"&&h({type:"SELECT_ALL_ACTIONS"}),K==="read-only"&&h({type:"ON_CHANGE_READ_ONLY"})},X=[{value:"read-only",label:{id:"Settings.tokens.types.read-only",defaultMessage:"Read-only"}},{value:"full-access",label:{id:"Settings.tokens.types.full-access",defaultMessage:"Full access"}},{value:"custom",label:{id:"Settings.tokens.types.custom",defaultMessage:"Custom"}}];return(0,e.jsx)(n.k,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:(0,e.jsxs)(l.C,{direction:"column",alignItems:"stretch",gap:4,children:[(0,e.jsx)(c.O,{variant:"delta",as:"h2",children:B({id:"global.details",defaultMessage:"Details"})}),(0,e.jsxs)(f.y,{gap:5,children:[(0,e.jsx)(A.C,{col:6,xs:12,children:(0,e.jsx)(k.T,{errors:t,values:d,canEditInputs:o,onChange:i})},"name"),(0,e.jsx)(A.C,{col:6,xs:12,children:(0,e.jsx)(k.a,{errors:t,values:d,canEditInputs:o,onChange:i})},"description"),(0,e.jsx)(A.C,{col:6,xs:12,children:(0,e.jsx)(k.L,{isCreating:_,errors:t,values:d,onChange:i,token:O})},"lifespan"),(0,e.jsx)(A.C,{col:6,xs:12,children:(0,e.jsx)(k.b,{values:d,errors:t,label:{id:"Settings.tokens.form.type",defaultMessage:"Token type"},onChange:K=>{W({target:{value:K}}),i({target:{name:"type",value:K}})},options:X,canEditInputs:o})},"type")]})]})})};ce.propTypes={errors:a.shape({name:a.string,description:a.string,lifespan:a.string,type:a.string}),onChange:a.func.isRequired,canEditInputs:a.bool.isRequired,values:a.shape({name:a.string,description:a.string,lifespan:a.oneOfType([a.number,a.string]),type:a.string}).isRequired,isCreating:a.bool.isRequired,apiToken:a.shape({id:a.oneOfType([a.number,a.string]),type:a.string,lifespan:a.string,name:a.string,accessKey:a.string,permissions:a.array,description:a.string,createdAt:a.string}),onDispatch:a.func.isRequired,setHasChangedPermissions:a.func.isRequired},ce.defaultProps={errors:{},apiToken:{}};const pe=({apiTokenName:t})=>{const{formatMessage:i}=(0,v.c)();return(0,g.G0)(),(0,e.jsxs)(M.G,{"aria-busy":"true",children:[(0,e.jsx)(g.K8,{name:"API Tokens"}),(0,e.jsx)(T.a,{primaryAction:(0,e.jsx)(j.Z,{disabled:!0,startIcon:(0,e.jsx)(se.c,{}),type:"button",size:"L",children:i({id:"global.save",defaultMessage:"Save"})}),title:t||i({id:"Settings.apiTokens.createPage.title",defaultMessage:"Create API Token"})}),(0,e.jsx)(L.S,{children:(0,e.jsx)(g.Wm,{})})]})};pe.defaultProps={apiTokenName:null},pe.propTypes={apiTokenName:a.string};const Oe=t=>{switch(t){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},Te=(0,w.cp)(n.k)`
  margin: -1px;
  border-radius: ${({theme:t})=>t.spaces[1]} 0 0 ${({theme:t})=>t.spaces[1]};
`;function ue({route:t}){const{formatMessage:i}=(0,v.c)(),{method:o,handler:_,path:d}=t,O=d?te(d.split("/")):[],[h="",N=""]=_?_.split("."):[],B=Oe(t.method);return(0,e.jsxs)(l.C,{direction:"column",alignItems:"stretch",gap:2,children:[(0,e.jsxs)(c.O,{variant:"delta",as:"h3",children:[i({id:"Settings.apiTokens.createPage.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",(0,e.jsx)("span",{children:h}),(0,e.jsxs)(c.O,{variant:"delta",textColor:"primary600",children:[".",N]})]}),(0,e.jsxs)(l.C,{hasRadius:!0,background:"neutral0",borderColor:"neutral200",gap:0,children:[(0,e.jsx)(Te,{background:B.background,borderColor:B.border,padding:2,children:(0,e.jsx)(c.O,{fontWeight:"bold",textColor:B.text,children:o})}),(0,e.jsx)(n.k,{paddingLeft:2,paddingRight:2,children:Y(O,W=>(0,e.jsxs)(c.O,{textColor:W.includes(":")?"neutral600":"neutral900",children:["/",W]},W))})]})]})}ue.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},ue.propTypes={route:a.shape({handler:a.string,method:a.string,path:a.string})};const Pe=()=>{const{value:{selectedAction:t,routes:i}}=J(),{formatMessage:o}=(0,v.c)(),_=t?.split(".")[0];return(0,e.jsx)(A.C,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"},children:t?(0,e.jsx)(l.C,{direction:"column",alignItems:"stretch",gap:2,children:i[_]?.map(d=>d.config.auth?.scope?.includes(t)||d.handler===t?(0,e.jsx)(ue,{route:d},d.handler):null)}):(0,e.jsxs)(l.C,{direction:"column",alignItems:"stretch",gap:2,children:[(0,e.jsx)(c.O,{variant:"delta",as:"h3",children:o({id:"Settings.apiTokens.createPage.permissions.header.title",defaultMessage:"Advanced settings"})}),(0,e.jsx)(c.O,{as:"p",textColor:"neutral600",children:o({id:"Settings.apiTokens.createPage.permissions.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"})})]})})},ye=(0,w.gV)`
  background: ${t=>t.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,Me=(0,w.cp)(n.k)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${t=>t.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${t=>t.isActive&&ye}
  &:hover {
    ${ye}
  }
`,ve=w.cp.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:t})=>t.colors.neutral150};
`,ge=({controllers:t,label:i,orderNumber:o,disabled:_,onExpanded:d,indexExpandendCollapsedContent:O})=>{const{value:{onChangeSelectAll:h,onChange:N,selectedActions:B,setSelectedAction:W,selectedAction:X}}=J(),[K,ie]=(0,r.useState)(!1),{formatMessage:Ee}=(0,v.c)(),Z=()=>{ie(P=>!P),d(o)};(0,r.useEffect)(()=>{O!==null&&O!==o&&K&&ie(!1)},[O,o,K]);const R=P=>P===X;return(0,e.jsxs)(G.G,{expanded:K,onToggle:Z,variant:o%2?"primary":"secondary",children:[(0,e.jsx)(x.M,{title:Ce(i)}),(0,e.jsx)(u.u,{children:t?.map(P=>{const q=P.actions.every(S=>B.includes(S.actionId)),_e=P.actions.some(S=>B.includes(S.actionId));return(0,e.jsxs)(n.k,{children:[(0,e.jsxs)(l.C,{justifyContent:"space-between",alignItems:"center",padding:4,children:[(0,e.jsx)(n.k,{paddingRight:4,children:(0,e.jsx)(c.O,{variant:"sigma",textColor:"neutral600",children:P?.controller})}),(0,e.jsx)(ve,{}),(0,e.jsx)(n.k,{paddingLeft:4,children:(0,e.jsx)(C.y,{value:q,indeterminate:!q&&_e,onValueChange:()=>{h({target:{value:[...P.actions]}})},disabled:_,children:Ee({id:"app.utils.select-all",defaultMessage:"Select all"})})})]}),(0,e.jsx)(f.y,{gap:4,padding:4,children:P?.actions&&P?.actions.map(S=>(0,e.jsx)(A.C,{col:6,children:(0,e.jsxs)(Me,{isActive:R(S.actionId),padding:2,hasRadius:!0,children:[(0,e.jsx)(C.y,{value:B.includes(S.actionId),name:S.actionId,onValueChange:()=>{N({target:{value:S.actionId}})},disabled:_,children:S.action}),(0,e.jsx)("button",{type:"button","data-testid":"action-cog",onClick:()=>W({target:{value:S.actionId}}),style:{display:"inline-flex",alignItems:"center"},children:(0,e.jsx)(re.c,{})})]})},S.actionId))})]},`${i}.${P?.controller}`)})})]})};ge.defaultProps={controllers:[],orderNumber:0,disabled:!1,onExpanded:()=>null,indexExpandendCollapsedContent:null},ge.propTypes={controllers:a.array,orderNumber:a.number,label:a.string.isRequired,disabled:a.bool,onExpanded:a.func,indexExpandendCollapsedContent:a.number};const he=({section:t,...i})=>{const[o,_]=(0,r.useState)(null),d=O=>_(O);return(0,e.jsx)(n.k,{padding:4,background:"neutral0",children:t&&t.map((O,h)=>(0,e.jsx)(ge,{label:O.label,controllers:O.controllers,orderNumber:h,indexExpandendCollapsedContent:o,onExpanded:d,name:O.apiId,...i},O.apiId))})};he.defaultProps={section:null},he.propTypes={section:a.arrayOf(a.object)};const Ie=({...t})=>{const{value:{data:i}}=J(),{formatMessage:o}=(0,v.c)();return(0,e.jsxs)(f.y,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0",children:[(0,e.jsxs)(A.C,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,children:[(0,e.jsxs)(l.C,{direction:"column",alignItems:"stretch",gap:2,children:[(0,e.jsx)(c.O,{variant:"delta",as:"h2",children:o({id:"Settings.apiTokens.createPage.permissions.title",defaultMessage:"Permissions"})}),(0,e.jsx)(c.O,{as:"p",textColor:"neutral600",children:o({id:"Settings.apiTokens.createPage.permissions.description",defaultMessage:"Only actions bound by a route are listed below."})})]}),i?.permissions&&(0,e.jsx)(he,{section:i?.permissions,...t})]}),(0,e.jsx)(Pe,{})]})},De=(0,r.memo)(Ie),je=(t,i=[])=>({...t,selectedAction:null,routes:[],selectedActions:[],data:fe(i)}),Re={data:{},selectedActions:[]},Le=(t,i)=>(0,le.cp)(t,o=>{switch(i.type){case"ON_CHANGE":{o.selectedActions.includes(i.value)?ne(o.selectedActions,i.value):o.selectedActions.push(i.value);break}case"SELECT_ALL_IN_PERMISSION":{i.value.every(d=>o.selectedActions.includes(d.actionId))?i.value.forEach(d=>{ne(o.selectedActions,d.actionId)}):i.value.forEach(d=>{o.selectedActions.push(d.actionId)});break}case"SELECT_ALL_ACTIONS":{o.selectedActions=[...o.data.allActionsIds];break}case"ON_CHANGE_READ_ONLY":{const _=o.data.allActionsIds.filter(d=>d.includes("find")||d.includes("findOne"));o.selectedActions=[..._];break}case"UPDATE_PERMISSIONS_LAYOUT":{o.data=fe(i.value);break}case"UPDATE_ROUTES":{o.routes={...i.value};break}case"UPDATE_PERMISSIONS":{o.selectedActions=[...i.value];break}case"SET_SELECTED_ACTION":{o.selectedAction=i.value;break}default:return o}}),ke="Name already taken",Se=()=>{(0,g.G0)();const{formatMessage:t}=(0,v.c)(),{lockApp:i,unlockApp:o}=(0,g.H6)(),_=(0,g.eo)(),d=(0,H.Uz)(),O=(0,F.w1)(V.s),[h,N]=(0,r.useState)(d.location.state?.apiToken.accessKey?{...d.location.state.apiToken}:null),{trackUsage:B}=(0,g.m4)(),W=(0,r.useRef)(B),{setCurrentStep:X}=(0,g.sg)(),{allowedActions:{canCreate:K,canUpdate:ie,canRegenerate:Ee}}=(0,g.aU)(O.settings["api-tokens"]),[Z,R]=(0,r.useReducer)(Le,Re,p=>je(p,{})),{params:{id:P}}=(0,H.SU)("/settings/api-tokens/:id"),{get:q,post:_e,put:S}=(0,g.Qn)(),U=P==="create";(0,$.useQuery)("content-api-permissions",async()=>{const[p,Q]=await Promise.all(["/admin/content-api/permissions","/admin/content-api/routes"].map(async ee=>{const{data:D}=await q(ee);return D.data}));R({type:"UPDATE_PERMISSIONS_LAYOUT",value:p}),R({type:"UPDATE_ROUTES",value:Q}),h&&(h?.type==="read-only"&&R({type:"ON_CHANGE_READ_ONLY"}),h?.type==="full-access"&&R({type:"SELECT_ALL_ACTIONS"}),h?.type==="custom"&&R({type:"UPDATE_PERMISSIONS",value:h?.permissions}))},{onError(){_({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),(0,r.useEffect)(()=>{W.current(U?"didAddTokenFromList":"didEditTokenFromList",{tokenType:z.A})},[U]);const{status:be}=(0,$.useQuery)(["api-token",P],async()=>{const{data:{data:p}}=await q(`/admin/api-tokens/${P}`);return N({...p}),p?.type==="read-only"&&R({type:"ON_CHANGE_READ_ONLY"}),p?.type==="full-access"&&R({type:"SELECT_ALL_ACTIONS"}),p?.type==="custom"&&R({type:"UPDATE_PERMISSIONS",value:p?.permissions}),p},{enabled:!U&&!h,onError(){_({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),Ue=async(p,Q)=>{W.current(U?"willCreateToken":"willEditToken",{tokenType:z.A}),i();const ee=p.lifespan&&parseInt(p.lifespan,10)&&p.lifespan!=="0"?parseInt(p.lifespan,10):null;try{const{data:{data:D}}=U?await _e("/admin/api-tokens",{...p,lifespan:ee,permissions:p.type==="custom"?Z.selectedActions:null}):await S(`/admin/api-tokens/${P}`,{name:p.name,description:p.description,type:p.type,permissions:p.type==="custom"?Z.selectedActions:null});U&&(d.replace(`/settings/api-tokens/${D.id}`,{apiToken:D}),X("apiTokens.success")),o(),N({...D}),_({type:"success",message:t(U?{id:"notification.success.apitokencreated",defaultMessage:"API Token successfully created"}:{id:"notification.success.apitokenedited",defaultMessage:"API Token successfully edited"})}),W.current(U?"didCreateToken":"didEditToken",{type:h.type,tokenType:z.A})}catch(D){const Ae=(0,b.f)(D.response.data);Q.setErrors(Ae),D?.response?.data?.error?.message===ke?_({type:"warning",message:D.response.data.message||"notification.error.tokennamenotunique"}):_({type:"warning",message:D?.response?.data?.message||"notification.error"}),o()}},[Be,me]=(0,r.useState)(!1),We={...Z,onChange:({target:{value:p}})=>{me(!0),R({type:"ON_CHANGE",value:p})},onChangeSelectAll:({target:{value:p}})=>{me(!0),R({type:"SELECT_ALL_IN_PERMISSION",value:p})},setSelectedAction:({target:{value:p}})=>{R({type:"SET_SELECTED_ACTION",value:p})}},xe=ie&&!U||K&&U;return!U&&!h&&be!=="success"?(0,e.jsx)(pe,{apiTokenName:h?.name}):(0,e.jsx)(ae,{value:We,children:(0,e.jsxs)(M.G,{children:[(0,e.jsx)(g.K8,{name:"API Tokens"}),(0,e.jsx)(y.QJ,{validationSchema:k.s,validateOnChange:!1,initialValues:{name:h?.name||"",description:h?.description||"",type:h?.type,lifespan:h?.lifespan?h.lifespan.toString():h?.lifespan},enableReinitialize:!0,onSubmit:(p,Q)=>Ue(p,Q),children:({errors:p,handleChange:Q,isSubmitting:ee,values:D,setFieldValue:Ae})=>(Be&&D?.type!=="custom"&&Ae("type","custom"),(0,e.jsxs)(g.QF,{children:[(0,e.jsx)(k.F,{backUrl:"/settings/api-tokens",title:{id:"Settings.apiTokens.createPage.title",defaultMessage:"Create API Token"},token:h,setToken:N,canEditInputs:xe,canRegenerate:Ee,isSubmitting:ee,regenerateUrl:"/admin/api-tokens/"}),(0,e.jsx)(L.S,{children:(0,e.jsxs)(l.C,{direction:"column",alignItems:"stretch",gap:6,children:[Boolean(h?.name)&&(0,e.jsx)(k.c,{token:h?.accessKey,tokenType:z.A}),(0,e.jsx)(ce,{errors:p,onChange:Q,canEditInputs:xe,isCreating:U,values:D,apiToken:h,onDispatch:R,setHasChangedPermissions:me}),(0,e.jsx)(De,{disabled:!xe||D?.type==="read-only"||D?.type==="full-access"})]})})]}))})]})})}},42616:(E,m,s)=>{"use strict";s.d(m,{G:()=>G,Q:()=>j});var e=s(19968),r=s(62552),n=s(69372),l=s(10900),c=s(37856),f=s(63358),A=s(48936),M=s(5e3);const T=({theme:x,expanded:u,variant:C,disabled:g,error:y})=>y?`1px solid ${x.colors.danger600} !important`:g?`1px solid ${x.colors.neutral150}`:u?`1px solid ${x.colors.primary600}`:C==="primary"?`1px solid ${x.colors.neutral0}`:`1px solid ${x.colors.neutral100}`,j=(0,n.cp)(f.O)``,L=(0,n.cp)(M.k)`
  border: ${T};

  &:hover:not([aria-disabled='true']) {
    border: 1px solid ${({theme:x})=>x.colors.primary600};

    ${j} {
      color: ${({theme:x,expanded:u})=>u?void 0:x.colors.primary700};
    }

    ${f.O} {
      color: ${({theme:x,expanded:u})=>u?void 0:x.colors.primary600};
    }

    & > ${A.C} {
      background: ${({theme:x})=>x.colors.primary100};
    }

    [data-strapi-dropdown='true'] {
      background: ${({theme:x})=>x.colors.primary200};
    }
  }
`,G=({children:x,disabled:u=!1,error:C,expanded:g=!1,hasErrorMessage:y=!0,id:v,onToggle:$,toggle:F,size:H="M",variant:I="primary",shadow:V})=>{const b=(0,c.I)(v),z=r.useMemo(()=>({expanded:g,onToggle:$,toggle:F,id:b,size:H,variant:I,disabled:u}),[u,g,b,$,H,F,I]);return(0,e.jsxs)(l.O.Provider,{value:z,children:[(0,e.jsx)(L,{"data-strapi-expanded":g,disabled:u,"aria-disabled":u,expanded:g,hasRadius:!0,variant:I,error:C,shadow:V,children:x}),C&&y&&(0,e.jsx)(M.k,{paddingTop:1,children:(0,e.jsx)(f.O,{variant:"pi",textColor:"danger600",children:C})})]})}},12248:(E,m,s)=>{"use strict";s.d(m,{u:()=>l});var e=s(19968),r=s(10900),n=s(5e3);const l=({children:c,...f})=>{const{expanded:A,id:M}=(0,r.y)();if(!A)return null;const T=`accordion-content-${M}`,j=`accordion-label-${M}`,L=`accordion-desc-${M}`;return(0,e.jsx)(n.k,{role:"region",id:T,"aria-labelledby":j,"aria-describedby":L,...f,children:c})}},10900:(E,m,s)=>{"use strict";s.d(m,{O:()=>r,y:()=>n});var e=s(62552);const r=(0,e.createContext)({disabled:!1,expanded:!1,id:"",size:"M",variant:"primary"}),n=()=>(0,e.useContext)(r)},34404:(E,m,s)=>{"use strict";s.d(m,{M:()=>x});var e=s(19968),r=s(14520),n=s(69372),l=s(42616),c=s(10900);const f=({expanded:u,disabled:C,variant:g})=>{let y="neutral100";return u?y="primary100":C?y="neutral150":g==="primary"&&(y="neutral0"),y};var A=s(82800),M=s(55716),T=s(48936),j=s(63358);const L=(0,n.cp)(A.c)`
  text-align: left;

  // necessary to make the ellipsis prop work on the title
  > span {
    max-width: 100%;
  }

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:u,expanded:C})=>C?u.colors.primary600:u.colors.neutral500};
    }
  }
`,G=(0,n.cp)(T.C)`
  min-height: ${({theme:u,size:C})=>u.sizes.accordions[C]};
  border-radius: ${({theme:u,expanded:C})=>C?`${u.borderRadius} ${u.borderRadius} 0 0`:u.borderRadius};

  &:hover {
    svg {
      path {
        fill: ${({theme:u})=>u.colors.primary600};
      }
    }
  }
`,x=({title:u,description:C,as:g="span",togglePosition:y="right",action:v,...$})=>{const{onToggle:F,toggle:H,expanded:I,id:V,size:b,variant:z,disabled:k}=(0,c.y)(),a=`accordion-content-${V}`,se=`accordion-label-${V}`,re=`accordion-desc-${V}`,Y=b==="M"?6:4,te=b==="M"?Y:Y-2,w=f({expanded:I,disabled:k,variant:z}),le={as:g,fontWeight:b==="S"?"bold":void 0,id:se,textColor:I?"primary600":"neutral700",ellipsis:!0,variant:b==="M"?"delta":void 0},ne=I?"primary600":"neutral600",de=I?"primary200":"neutral200",oe=b==="M"?`${32/16}rem`:`${24/16}rem`,ae=()=>{k||(H&&!F?(console.warn('Deprecation warning: Usage of "toggle" prop in Accordion component is deprecated. This is discouraged and will be removed in the next major release. Please use "onToggle" instead'),H()):F&&F())},J=(0,e.jsx)(T.C,{justifyContent:"center",borderRadius:"50%",height:oe,width:oe,transform:I?"rotate(180deg)":void 0,"data-strapi-dropdown":!0,"aria-hidden":!0,as:"span",background:de,cursor:k?"not-allowed":"pointer",onClick:ae,shrink:0,children:(0,e.jsx)(M.G,{as:r.c,width:b==="M"?`${11/16}rem`:`${8/16}rem`,color:I?"primary600":"neutral600"})});return(0,e.jsx)(G,{paddingBottom:te,paddingLeft:Y,paddingRight:Y,paddingTop:te,background:w,expanded:I,size:b,justifyContent:"space-between",cursor:k?"not-allowed":"",children:(0,e.jsxs)(T.C,{gap:3,flex:1,maxWidth:"100%",children:[y==="left"&&J,(0,e.jsx)(L,{onClick:ae,"aria-disabled":k,"aria-expanded":I,"aria-controls":a,"aria-labelledby":se,"data-strapi-accordion-toggle":!0,expanded:I,type:"button",flex:1,minWidth:0,...$,children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(l.Q,{...le,children:u}),C&&(0,e.jsx)(j.O,{as:"p",id:re,textColor:ne,children:C})]})}),y==="right"&&(0,e.jsxs)(T.C,{gap:3,children:[J,v]}),y==="left"&&v]})})}}}]);

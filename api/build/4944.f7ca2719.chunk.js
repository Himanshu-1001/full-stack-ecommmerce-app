(self.webpackChunkapi=self.webpackChunkapi||[]).push([[4944],{80232:(y,v,t)=>{var n=t(48208),a=t(62632),c=a(n);y.exports=c},22488:(y,v,t)=>{var n=t(80232),a=t(16005);function c(g,p){var r=-1,d=a(g)?Array(g.length):[];return n(g,function(m,C,O){d[++r]=p(m,C,O)}),d}y.exports=c},24576:(y,v,t)=>{var n=t(12480),a=t(64316),c=t(24020),g=t(22488),p=t(92048),r=t(85968),d=t(71456),m=t(45504),C=t(75516);function O(P,M,x){M.length?M=n(M,function(D){return C(D)?function(T){return a(T,D.length===1?D[0]:D)}:D}):M=[m];var K=-1;M=n(M,r(c));var R=g(P,function(D,T,W){var F=n(M,function(N){return N(D)});return{criteria:F,index:++K,value:D}});return p(R,function(D,T){return d(D,T,x)})}y.exports=O},92048:y=>{function v(t,n){var a=t.length;for(t.sort(n);a--;)t[a]=t[a].value;return t}y.exports=v},13052:(y,v,t)=>{var n=t(36792);function a(c,g){if(c!==g){var p=c!==void 0,r=c===null,d=c===c,m=n(c),C=g!==void 0,O=g===null,P=g===g,M=n(g);if(!O&&!M&&!m&&c>g||m&&C&&P&&!O&&!M||r&&C&&P||!p&&P||!d)return 1;if(!r&&!m&&!M&&c<g||M&&p&&d&&!r&&!m||O&&p&&d||!C&&d||!P)return-1}return 0}y.exports=a},71456:(y,v,t)=>{var n=t(13052);function a(c,g,p){for(var r=-1,d=c.criteria,m=g.criteria,C=d.length,O=p.length;++r<C;){var P=n(d[r],m[r]);if(P){if(r>=O)return P;var M=p[r];return P*(M=="desc"?-1:1)}}return c.index-g.index}y.exports=a},62632:(y,v,t)=>{var n=t(16005);function a(c,g){return function(p,r){if(p==null)return p;if(!n(p))return c(p,r);for(var d=p.length,m=g?d:-1,C=Object(p);(g?m--:++m<d)&&r(C[m],m,C)!==!1;);return p}}y.exports=a},87144:(y,v,t)=>{var n=t(78456),a=t(24576),c=t(41912),g=t(53492),p=c(function(r,d){if(r==null)return[];var m=d.length;return m>1&&g(r,d[0],d[1])?d=[]:m>2&&g(d[0],d[1],d[2])&&(d=[d[0]]),a(r,n(d,1),[])});y.exports=p},84944:(y,v,t)=>{"use strict";t.r(v),t.d(v,{SettingsPage:()=>Mn});var n=t(19968),a=t(62552),c=t(55716),g=t(11208),p=t(2931),r=t(63358),d=t(79672),m=t(5e3),C=t(95080),O=t(48936),P=t(35676),M=t(74264),x=t(3548),K=t(62492),R=t(6496),D=t(53804),T=t(6912),W=t(80700),F=t(49780),N=t(46352),X=t(8068),k=t(68264),ot=t(58588),Q=t(13892),et=t(66688),J=t(89600),at=t(49068),it=t(23264),ut=t(26788),b=t(28724),V=t(70996),gt=t(20596),pt=t(48112),ht=t(89296),Et=t(28464),H=t(42816),Lt=t(65280),U=t(16048),Ft=t(21424),G=t(14632),lt=t(49008),$t=t(39380),Y=t(60056),_t=t(87144),jt=t(70516),yt=t(61952),Gt=t(53504),Nt=t(32016),Zt=t(87320),Vt=t(3240),Ht=t(89976),Qt=t(73560),Yt=t(54288),Xt=t(48636),Jt=t(51384),bt=t(53305),Rt=t(73648),e=t(33104),Tt=t(69372),At=t(48632),Mt=t(29088),wt=t(36196),xn=t(54320),fn=t(5240),On=t(91892),vn=t(20880),Pn=t(54223),Cn=t(18424),Dn=t(97820),Ln=t(99568),jn=t(21968),yn=t(12132),Rn=t(85676),Tn=t(35184),An=t(17892),Bn=t(31212),In=t(96556);const kt=o=>o.map(s=>{const l=s.links.map(i=>({...i,isDisplayed:!1}));return{...s,links:l}}),qt=()=>{const[{isLoading:o,menu:s},l]=a.useState({isLoading:!0,menu:[]}),{allPermissions:i}=(0,U.c_)(),{shouldUpdateStrapi:h}=(0,U.s7)(),{settings:L}=(0,U.U7)(),A=(0,jt.w1)(yt.s),j=a.useMemo(()=>(0,Y.Q)(),[]),{admin:E,global:u}=(0,Y.p)(j,async()=>(await t.e(368).then(t.bind(t,60368))).SETTINGS_LINKS_EE(),{combine(f,S){return{admin:[...S.admin,...f.admin],global:[...f.global,...S.global]}},defaultValue:{admin:[],global:[]}}),I=a.useCallback(f=>{if(!f.id)throw new Error("The settings menu item must have an id attribute.");return{...f,permissions:A.settings?.[f.id]?.main??[]}},[A.settings]);return a.useEffect(()=>{const f=async()=>{const Z=await(tt=>Promise.all(tt.reduce((nt,dt,ct)=>{const B=dt.links.map(async(st,w)=>({hasPermission:await(0,U.Q3)(i,st.permissions),sectionIndex:ct,linkIndex:w}));return[...nt,...B]},[])))(_);l(tt=>({...tt,isLoading:!1,menu:_.map((nt,dt)=>({...nt,links:nt.links.map((ct,B)=>{const st=Z.find(w=>w.sectionIndex===dt&&w.linkIndex===B);return{...ct,isDisplayed:Boolean(st?.hasPermission)}})}))}))},{global:S,...$}=L,_=kt([{...S,links:_t([...S.links,...u.map(I)],z=>z.id).map(z=>({...z,hasNotification:z.id==="000-application-infos"&&h}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:E.map(I)},...Object.values($)]);f()},[E,u,i,L,h,I]),{isLoading:o,menu:s.map(f=>({...f,links:f.links.filter(S=>S.isDisplayed)}))}},tn=(0,Tt.cp)(c.G)`
  right: 15px;
  position: absolute;
`,Bt=({menu:o})=>{const{formatMessage:s}=(0,G.c)(),{trackUsage:l}=(0,U.m4)(),{pathname:i}=(0,lt.IT)(),L=o.filter(E=>!E.links.every(u=>u.isDisplayed===!1)).map(E=>({...E,title:E.intlLabel,links:E.links.map(u=>({...u,title:u.intlLabel,name:u.id}))})),A=s({id:"global.settings",defaultMessage:"Settings"}),j=(E=null)=>{l("willNavigate",{from:i,to:E})};return(0,n.jsxs)(Gt.y,{ariaLabel:A,children:[(0,n.jsx)(Nt.C,{label:A}),(0,n.jsx)(Zt.I,{children:L.map(E=>(0,n.jsx)(Vt.A,{label:s(E.intlLabel),children:E.links.map(u=>(0,n.jsxs)(Ht.w,{as:$t.Af,withBullet:u.hasNotification,to:u.to,onClick:()=>j(u.to),children:[s(u.intlLabel),u?.lockIcon&&(0,n.jsx)(tn,{width:`${15/16}rem`,height:`${15/16}rem`,as:Qt.c})]},u.id))},E.id))})]})};Bt.propTypes={menu:e.array.isRequired};const nn=[{async Component(){return await t.e(5396).then(t.bind(t,70632))},to:"/settings/roles",exact:!0},{async Component(){return await Promise.all([t.e(4080),t.e(1168),t.e(8144)]).then(t.bind(t,28144))},to:"/settings/roles/duplicate/:id",exact:!0},{async Component(){return await Promise.all([t.e(4080),t.e(1168),t.e(8144)]).then(t.bind(t,28144))},to:"/settings/roles/new",exact:!0},{async Component(){return await Promise.all([t.e(1168),t.e(6876)]).then(t.bind(t,46876))},to:"/settings/roles/:id",exact:!0},{async Component(){return await t.e(8160).then(t.bind(t,68160)).then(s=>s.i)},to:"/settings/users",exact:!0},{async Component(){return await t.e(8).then(t.bind(t,30008))},to:"/settings/users/:id",exact:!0},{async Component(){return await Promise.all([t.e(4760),t.e(9240)]).then(t.bind(t,99240))},to:"/settings/webhooks/create",exact:!0},{async Component(){return await Promise.all([t.e(4760),t.e(9616)]).then(t.bind(t,69616))},to:"/settings/webhooks/:id",exact:!0},{async Component(){return await t.e(9944).then(t.bind(t,9944))},to:"/settings/webhooks",exact:!0},{async Component(){return await t.e(9816).then(t.bind(t,59816))},to:"/settings/api-tokens",exact:!0},{async Component(){return await Promise.all([t.e(4080),t.e(8400),t.e(4157),t.e(6728)]).then(t.bind(t,96728))},to:"/settings/api-tokens/create",exact:!0},{async Component(){return await Promise.all([t.e(4080),t.e(8400),t.e(4157),t.e(1684)]).then(t.bind(t,41684))},to:"/settings/api-tokens/:id",exact:!0},{async Component(){return await Promise.all([t.e(4080),t.e(8400),t.e(8524)]).then(t.bind(t,68524))},to:"/settings/transfer-tokens/create",exact:!0},{async Component(){return await t.e(6891).then(t.bind(t,76891))},to:"/settings/transfer-tokens",exact:!0},{async Component(){return await Promise.all([t.e(4080),t.e(8400),t.e(1180)]).then(t.bind(t,21180))},to:"/settings/transfer-tokens/:id",exact:!0},{async Component(){return await t.e(9416).then(t.bind(t,39416))},to:"/settings/purchase-audit-logs",exact:!0},{async Component(){return await t.e(1688).then(t.bind(t,81688))},to:"/settings/purchase-review-workflows",exact:!0},{async Component(){return await t.e(4960).then(t.bind(t,44960))},to:"/settings/purchase-single-sign-on",exact:!0}],q=750,rt=100,It=["image/jpeg","image/png","image/svg+xml"],Ut={localImage:void 0},sn=(o=Ut,s)=>(0,Mt.cp)(o,l=>{switch(s.type){case"SET_LOCAL_IMAGE":{l.localImage=s.value;break}default:return l}}),xt=({onChangeLogo:o,customLogo:s,goTo:l,Component:i,modalTitle:h,next:L,prev:A,currentStep:j})=>{const[{localImage:E},u]=(0,a.useReducer)(sn,Ut),{formatMessage:I}=(0,G.c)(),f=$=>{u({type:"SET_LOCAL_IMAGE",value:$})},S=()=>{l(null)};return j?(0,n.jsxs)(g.E,{labelledBy:"modal",onClose:S,children:[(0,n.jsx)(p.k,{children:(0,n.jsx)(r.O,{fontWeight:"bold",as:"h2",id:"modal",children:I(h)})}),(0,n.jsx)(i,{setLocalImage:f,goTo:l,next:L,prev:A,onClose:S,asset:E||s,onChangeLogo:o})]}):null};xt.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},xt.propTypes={Component:e.elementType,currentStep:e.string,customLogo:e.shape({name:e.string,url:e.string,width:e.number,height:e.number,ext:e.string}),goTo:e.func.isRequired,modalTitle:e.shape({id:e.string,defaultMessage:e.string}),next:e.string,onChangeLogo:e.func.isRequired,prev:e.string};const St={currentStep:void 0},on=(o=St,s)=>(0,Mt.cp)(o,l=>{switch(s.type){case"GO_TO":{l.currentStep=s.to;break}default:return l}}),en={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},Wt={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},an=o=>new Promise(s=>{const l=new FileReader;l.onload=()=>{const i=new Image;i.onload=function(){s({width:i.width,height:i.height})},i.src=l.result},l.readAsDataURL(o)}),ln=(o,s)=>({ext:o.name.split(".").pop(),size:o.size/1e3,name:o.name,url:URL.createObjectURL(o),rawFile:o,width:s.width,height:s.height}),Kt=async o=>{let s;if(!It.includes(o.type))throw s=new Error("File format"),s.displayMessage=en,s;const i=await an(o);if(!(i.width<=q&&i.height<=q))throw s=new Error("File sizing"),s.displayMessage=Wt,s;const L=ln(o,i);if(!(L.size<=rt))throw s=new Error("File sizing"),s.displayMessage=Wt,s;return L},rn=(0,Tt.cp)(d.e)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,ft=({setLocalImage:o,goTo:s,next:l,onClose:i})=>{const{formatMessage:h}=(0,G.c)(),[L,A]=(0,a.useState)(!1),[j,E]=(0,a.useState)(void 0),u=(0,a.useRef)(null),I=()=>A(!0),f=()=>A(!1),S=z=>{z.preventDefault(),u.current.click()},$=async()=>{f();const z=u.current.files[0];if(z)try{const Z=await Kt(z);o(Z),s(l)}catch(Z){if(Z.displayMessage)E(h(Z.displayMessage,{size:rt,dimension:q})),u.current.focus();else throw Z}},_=()=>L?"primary500":j?"danger600":"neutral300";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("form",{children:(0,n.jsx)(m.k,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:(0,n.jsx)(C.I,{name:"logo-upload",error:j,children:(0,n.jsx)("label",{htmlFor:"logo-upload",children:(0,n.jsxs)(O.C,{direction:"column",alignItems:"stretch",gap:2,children:[(0,n.jsxs)(O.C,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:L?"primary100":"neutral100",borderColor:_(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:I,onDragLeave:f,children:[(0,n.jsx)(c.G,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:Yt.c,"aria-hidden":!0}),(0,n.jsx)(m.k,{paddingTop:3,paddingBottom:5,children:(0,n.jsx)(r.O,{variant:"delta",as:"span",children:h({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"})})}),(0,n.jsx)(rn,{accept:It,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:$,ref:u,id:"logo-upload"}),(0,n.jsx)(P.Z,{type:"button",onClick:S,children:h({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})}),(0,n.jsx)(m.k,{paddingTop:6,children:(0,n.jsx)(r.O,{variant:"pi",textColor:"neutral600",children:h({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:rt,dimension:q})})})]}),(0,n.jsx)(M.Q,{})]})})})})}),(0,n.jsx)(x._,{startActions:(0,n.jsx)(P.Z,{onClick:i,variant:"tertiary",children:h({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})})})]})};ft.defaultProps={next:null},ft.propTypes={goTo:e.func.isRequired,next:e.string,onClose:e.func.isRequired,setLocalImage:e.func.isRequired};const dn=async o=>{try{const{get:s}=(0,U.YF)(),l=await s(o,{responseType:"blob",timeout:8e3});return new File([l.data],l.config.url,{type:l.headers["content-type"]})}catch(s){throw s.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},s}},Ot=({goTo:o,next:s,onClose:l,setLocalImage:i})=>{const{formatMessage:h}=(0,G.c)(),[L,A]=(0,a.useState)(""),[j,E]=(0,a.useState)(null),u=f=>{A(f.target.value)},I=async()=>{try{const f=await dn(L),S=await Kt(f);i(S),o(s)}catch(f){if(f.displayMessage)E(h(f.displayMessage,{size:rt,dimension:q}));else throw f}};return(0,n.jsxs)("form",{onSubmit:f=>{f.preventDefault(),I()},children:[(0,n.jsx)(m.k,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:(0,n.jsx)(K.g,{label:h({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:j,onChange:u,value:L,name:"logo-url"})}),(0,n.jsx)(x._,{startActions:(0,n.jsx)(P.Z,{onClick:l,variant:"tertiary",children:h({id:"app.components.Button.cancel",defaultMessage:"Cancel"})}),endActions:(0,n.jsx)(P.Z,{type:"submit",children:h({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"})})})]})};Ot.defaultProps={next:null},Ot.propTypes={goTo:e.func.isRequired,next:e.string,onClose:e.func.isRequired,setLocalImage:e.func.isRequired};const vt=({setLocalImage:o,goTo:s,next:l,onClose:i})=>{const{formatMessage:h}=(0,G.c)();return(0,n.jsxs)(R.M,{label:h({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple",children:[(0,n.jsxs)(m.k,{paddingLeft:8,paddingRight:8,children:[(0,n.jsxs)(D.k,{children:[(0,n.jsx)(D.s,{children:h({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})}),(0,n.jsx)(D.s,{children:h({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"})})]}),(0,n.jsx)(T.c,{})]}),(0,n.jsxs)(W.o,{children:[(0,n.jsx)(W.G,{children:(0,n.jsx)(ft,{onClose:i,setLocalImage:o,goTo:s,next:l})}),(0,n.jsx)(W.G,{children:(0,n.jsx)(Ot,{onClose:i,setLocalImage:o,goTo:s,next:l})})]})]})};vt.defaultProps={next:null},vt.propTypes={goTo:e.func.isRequired,next:e.string,onClose:e.func.isRequired,setLocalImage:e.func.isRequired};const zt=({asset:o})=>{const{formatMessage:s}=(0,G.c)();return(0,n.jsxs)(F.M,{children:[(0,n.jsx)(N.q,{children:(0,n.jsx)(X.Q,{size:"S",src:o.url})}),(0,n.jsxs)(k.i,{children:[(0,n.jsxs)(ot.q,{children:[(0,n.jsx)(Q.O,{children:o.name}),(0,n.jsx)(Q.w,{children:`${o.ext.toUpperCase()} - ${o.width}\u2715${o.height}`})]}),(0,n.jsx)(et.g,{children:s({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"})})]})]})};zt.propTypes={asset:e.shape({name:e.string,url:e.string,width:e.number,height:e.number,ext:e.string}).isRequired};const Pt=({onClose:o,asset:s,prev:l,next:i,goTo:h,setLocalImage:L,onChangeLogo:A})=>{const{formatMessage:j}=(0,G.c)(),E=()=>{L(void 0),h(l)},u=()=>{A(s),h(i)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(m.k,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:[(0,n.jsxs)(O.C,{justifyContent:"space-between",paddingBottom:6,children:[(0,n.jsxs)(O.C,{direction:"column",alignItems:"flex-start",children:[(0,n.jsx)(r.O,{variant:"pi",fontWeight:"bold",children:j({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})}),(0,n.jsx)(r.O,{variant:"pi",textColor:"neutral500",children:j({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"})})]}),(0,n.jsx)(P.Z,{onClick:E,variant:"secondary",children:j({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"})})]}),(0,n.jsx)(m.k,{maxWidth:(0,U.W8)(180),children:s.url?(0,n.jsx)(zt,{asset:s}):null})]}),(0,n.jsx)(x._,{startActions:(0,n.jsx)(P.Z,{onClick:o,variant:"tertiary",children:j({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})}),endActions:(0,n.jsx)(P.Z,{onClick:u,children:j({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"})})})]})};Pt.defaultProps={next:null,prev:null},Pt.propTypes={goTo:e.func.isRequired,asset:e.shape({name:e.string,url:e.string,width:e.number,height:e.number,ext:e.string}).isRequired,next:e.string,onClose:e.func.isRequired,onChangeLogo:e.func.isRequired,prev:e.string,setLocalImage:e.func.isRequired};const cn={upload:{Component:vt,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:Pt,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}},mt=({canUpdate:o,customLogo:s,defaultLogo:l,hint:i,label:h,onChangeLogo:L,onResetLogo:A})=>{const[{currentStep:j},E]=(0,a.useReducer)(on,St),{Component:u,next:I,prev:f,modalTitle:S}=cn[j]||{},{formatMessage:$}=(0,G.c)(),_=z=>{E({type:"GO_TO",to:z})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(J.m,{label:h,selectedSlide:0,hint:i,previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:s?.name||"logo.png",actions:(0,n.jsxs)(at.E,{children:[(0,n.jsx)(it.w,{disabled:!o,onClick:()=>_(s?"pending":"upload"),label:$({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:(0,n.jsx)(Xt.c,{})}),s&&(0,n.jsx)(it.w,{disabled:!o,onClick:A,label:$({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:(0,n.jsx)(Jt.c,{})})]}),children:(0,n.jsx)(ut.a,{label:$({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"}),children:(0,n.jsx)(m.k,{maxHeight:"40%",maxWidth:"40%",as:"img",src:s?.url||l,alt:$({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})})})}),(0,n.jsx)(xt,{Component:u,currentStep:j,onChangeLogo:L,customLogo:s,goTo:_,next:I,prev:f,modalTitle:S})]})};mt.defaultProps={canUpdate:!1,customLogo:null,hint:null},mt.propTypes={canUpdate:e.bool,customLogo:e.shape({url:e.string,name:e.string}),label:e.string.isRequired,hint:e.string,defaultLogo:e.string.isRequired,onChangeLogo:e.func.isRequired,onResetLogo:e.func.isRequired};const gn=(o,s)=>wt(o,{menuLogo:{display:s.menuLogo},authLogo:{display:s.authLogo}}),Ct={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}},authLogo:{display:null,submit:{rawFile:null,isReset:!1}}},mn=(o=Ct,s)=>(0,Mt.cp)(o,l=>{switch(s.type){case"SET_CUSTOM_MENU_LOGO":{l.menuLogo.display=s.value,l.menuLogo.submit.rawFile=s.value.rawFile;break}case"SET_CUSTOM_AUTH_LOGO":{l.authLogo.display=s.value,l.authLogo.submit.rawFile=s.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{l.menuLogo.display=null,l.menuLogo.submit={rawFile:null,isReset:!0};break}case"RESET_CUSTOM_AUTH_LOGO":{l.authLogo.display=null,l.authLogo.submit={rawFile:null,isReset:!0};break}default:return l}}),Dt=(0,a.forwardRef)(({canUpdate:o,projectSettingsStored:s},l)=>{const{formatMessage:i}=(0,G.c)(),{trackUsage:h}=(0,U.m4)(),{logos:{menu:L,auth:A}}=(0,Y.u)(),[{menuLogo:j,authLogo:E},u]=(0,a.useReducer)(mn,Ct,()=>gn(Ct,s)),I=_=>{u({type:"SET_CUSTOM_MENU_LOGO",value:_})},f=()=>{h("didClickResetLogo",{logo:"menu"}),u({type:"RESET_CUSTOM_MENU_LOGO"})},S=_=>{u({type:"SET_CUSTOM_AUTH_LOGO",value:_})},$=()=>{h("didClickResetLogo",{logo:"auth"}),u({type:"RESET_CUSTOM_AUTH_LOGO"})};return(0,a.useImperativeHandle)(l,()=>({getValues:()=>({menuLogo:j.submit,authLogo:E.submit})})),(0,n.jsxs)(m.k,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7,children:[(0,n.jsx)(r.O,{variant:"delta",as:"h3",children:i({id:"Settings.application.customization",defaultMessage:"Customization"})}),(0,n.jsx)(r.O,{variant:"pi",textColor:"neutral600",children:i({id:"Settings.application.customization.size-details",defaultMessage:"Max dimension: {dimension}\xD7{dimension}, Max file size: {size}KB"},{dimension:q,size:rt})}),(0,n.jsxs)(b.y,{paddingTop:4,gap:4,children:[(0,n.jsx)(V.C,{col:6,s:12,children:(0,n.jsx)(mt,{canUpdate:o,customLogo:j.display,defaultLogo:L.default,hint:i({id:"Settings.application.customization.menu-logo.carousel-hint",defaultMessage:"Replace the logo in the main navigation"}),label:i({id:"Settings.application.customization.carousel.menu-logo.title",defaultMessage:"Menu logo"}),onChangeLogo:I,onResetLogo:f})}),(0,n.jsx)(V.C,{col:6,s:12,children:(0,n.jsx)(mt,{canUpdate:o,customLogo:E.display,defaultLogo:A.default,hint:i({id:"Settings.application.customization.auth-logo.carousel-hint",defaultMessage:"Replace the logo in the authentication pages"}),label:i({id:"Settings.application.customization.carousel.auth-logo.title",defaultMessage:"Auth logo"}),onChangeLogo:S,onResetLogo:$})})]})]})});Dt.defaultProps={canUpdate:!1,projectSettingsStored:null},Dt.propTypes={canUpdate:e.bool,projectSettingsStored:e.shape({menuLogo:e.shape({url:e.string,name:e.string})})};const un=o=>{const s=new FormData;return Object.entries(o).forEach(([l,i])=>{i&&i.rawFile instanceof File&&s.append(l,i.rawFile),i&&i.isReset&&s.append(l,null)}),s},pn=()=>null,hn=()=>{const o=a.useRef(),s=(0,U.eo)(),{trackUsage:l}=(0,U.m4)(),{formatMessage:i}=(0,G.c)(),{get:h,post:L}=(0,U.Qn)(),{updateProjectSettings:A}=(0,Y.u)(),j=(0,jt.w1)(yt.s),{formatAPIError:E}=(0,U.An)(),{communityEdition:u,latestStrapiReleaseTag:I,nodeVersion:f,shouldUpdateStrapi:S,strapiVersion:$}=(0,U.s7)(),_=(0,Y.p)(pn,async()=>(await t.e(2580).then(t.bind(t,42580))).AdminSeatInfoEE),{allowedActions:{canRead:z,canUpdate:Z}}=(0,U.aU)(j.settings["project-settings"]);(0,U.G0)();const{data:tt,isLoading:nt}=(0,At.useQuery)(["project-settings"],async()=>{const{data:B}=await h("/admin/project-settings");return B},{cacheTime:0,enabled:z,select(B){return{...B,authLogo:B.authLogo?{...B.authLogo,url:(0,U.AZ)(B.authLogo.url)}:B.authLogo,menuLogo:B.menuLogo?{...B.menuLogo,url:(0,U.AZ)(B.menuLogo.url)}:B.menuLogo}}}),dt=(0,At.useMutation)(B=>L("/admin/project-settings",B,{headers:{"Content-Type":"multipart/form-data"}}),{onError(B){s({type:"warning",message:E(B)})},async onSuccess(B){const{menuLogo:st,authLogo:w}=B;A({menuLogo:st?.url,authLogo:w?.url}),st?.rawFile&&l("didChangeLogo",{logo:"menu"}),w?.rawFile&&l("didChangeLogo",{logo:"auth"}),s({type:"success",message:i({id:"app",defaultMessage:"Saved"})})}}),ct=B=>{B.preventDefault(),dt.mutate(un(o.current.getValues()))};return _?(0,n.jsxs)(gt._,{children:[(0,n.jsx)(U.K8,{name:"Application"}),(0,n.jsx)(pt.G,{children:nt?(0,n.jsx)(ht.c,{children:i({id:"Settings.application.isLoading",defaultMessage:"Loading"})}):(0,n.jsxs)("form",{onSubmit:ct,children:[(0,n.jsx)(Et.a,{title:i({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:i({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:Z&&(0,n.jsx)(P.Z,{type:"submit",startIcon:(0,n.jsx)(bt.c,{}),children:i({id:"global.save",defaultMessage:"Save"})})}),(0,n.jsx)(H.S,{children:(0,n.jsxs)(O.C,{direction:"column",alignItems:"stretch",gap:6,children:[(0,n.jsxs)(O.C,{direction:"column",alignItems:"stretch",gap:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7,children:[(0,n.jsx)(r.O,{variant:"delta",as:"h3",children:i({id:"global.details",defaultMessage:"Details"})}),(0,n.jsxs)(b.y,{gap:5,as:"dl",children:[(0,n.jsxs)(V.C,{col:6,s:12,children:[(0,n.jsx)(r.O,{variant:"sigma",textColor:"neutral600",as:"dt",children:i({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})}),(0,n.jsxs)(O.C,{gap:3,direction:"column",alignItems:"start",as:"dd",children:[(0,n.jsxs)(r.O,{children:["v",$]}),S&&(0,n.jsx)(Lt.c,{href:`https://github.com/strapi/strapi/releases/tag/${I}`,isExternal:!0,endIcon:(0,n.jsx)(Rt.c,{}),children:i({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"})})]})]}),(0,n.jsxs)(V.C,{col:6,s:12,children:[(0,n.jsx)(r.O,{variant:"sigma",textColor:"neutral600",as:"dt",children:i({id:"Settings.application.edition-title",defaultMessage:"current plan"})}),(0,n.jsxs)(O.C,{gap:3,direction:"column",alignItems:"start",as:"dd",children:[(0,n.jsx)(r.O,{children:i({id:"Settings.application.ee-or-ce",defaultMessage:"{communityEdition, select, true {Community Edition} other {Enterprise Edition}}"},{communityEdition:u})}),(0,n.jsx)(Lt.c,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:(0,n.jsx)(Rt.c,{}),children:i({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})})]})]}),(0,n.jsxs)(V.C,{col:6,s:12,children:[(0,n.jsx)(r.O,{variant:"sigma",textColor:"neutral600",as:"dt",children:i({id:"Settings.application.node-version",defaultMessage:"node version"})}),(0,n.jsx)(r.O,{as:"dd",children:f})]}),(0,n.jsx)(_,{})]})]}),z&&tt&&(0,n.jsx)(Dt,{canUpdate:Z,ref:o,projectSettingsStored:tt})]})})]})})]}):null};function En(o){return o.filter((s,l,i)=>i.findIndex(h=>h.key===s.key)===l)}function Mn(){const{settingId:o}=(0,lt.W4)(),{settings:s}=(0,U.U7)(),{formatMessage:l}=(0,G.c)(),{isLoading:i,menu:h}=qt(),L=(0,Y.p)(nn,async()=>(await t.e(2688).then(t.bind(t,32688))).ROUTES_EE,{combine(E,u){return[...E,...u]},defaultValue:[]}),A=a.useMemo(()=>En(L.map(({to:E,Component:u,exact:I})=>(0,Y.d)(u,E,I))),[L]),j=Object.values(s).flatMap(E=>{const{links:u}=E;return u.map(I=>(0,Y.d)(I.Component,I.to,I.exact||!1))});return i?(0,n.jsx)(U.Wm,{}):o?(0,n.jsxs)(gt._,{sideNav:(0,n.jsx)(Bt,{menu:h}),children:[(0,n.jsx)(Ft.S,{title:l({id:"global.settings",defaultMessage:"Settings"})}),(0,n.jsxs)(lt.Wk,{children:[(0,n.jsx)(lt.kX,{path:"/settings/application-infos",component:hn,exact:!0}),A,j]})]}):(0,n.jsx)(lt.YJ,{to:"/settings/application-infos"})}},20596:(y,v,t)=>{"use strict";t.d(v,{_:()=>r});var n=t(19968),a=t(69372),c=t(5e3);const g=(0,a.cp)(c.k)`
  display: grid;
  grid-template-columns: ${({hasSideNav:d})=>d?"auto 1fr":"1fr"};
`,p=(0,a.cp)(c.k)`
  overflow-x: hidden;
`,r=({sideNav:d,children:m})=>(0,n.jsxs)(g,{hasSideNav:Boolean(d),children:[d,(0,n.jsx)(p,{paddingBottom:10,children:m})]})},65280:(y,v,t)=>{"use strict";t.d(v,{c:()=>P});var n=t(19968),a=t(62552),c=t(73648),g=t(39380),p=t(69372),r=t(53744),d=t(63358),m=t(5e3);const C=p.cp.a`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  pointer-events: ${({disabled:M})=>M?"none":void 0};
  color: ${({disabled:M,theme:x})=>M?x.colors.neutral600:x.colors.primary600};

  svg path {
    transition: fill 150ms ease-out;
    fill: currentColor;
  }

  svg {
    font-size: ${10/16}rem;
  }

  ${d.O} {
    transition: color 150ms ease-out;
    color: currentColor;
  }

  &:hover {
    color: ${({theme:M})=>M.colors.primary500};
  }

  &:active {
    color: ${({theme:M})=>M.colors.primary700};
  }

  ${r.Md};
`,O=(0,p.cp)(m.k)`
  display: flex;
`,P=a.forwardRef(({children:M,href:x,to:K,disabled:R=!1,startIcon:D,endIcon:T,...W},F)=>{const N=x?"_blank":void 0,X=x?"noreferrer noopener":void 0;return(0,n.jsxs)(C,{as:K&&!R?g.Af:"a",target:N,rel:X,to:R?void 0:K,href:R?"#":x,disabled:R,ref:F,...W,children:[D&&(0,n.jsx)(O,{as:"span","aria-hidden":!0,paddingRight:2,children:D}),(0,n.jsx)(d.O,{children:M}),T&&!x&&(0,n.jsx)(O,{as:"span","aria-hidden":!0,paddingLeft:2,children:T}),x&&(0,n.jsx)(O,{as:"span","aria-hidden":!0,paddingLeft:2,children:(0,n.jsx)(c.c,{})})]})})},53504:(y,v,t)=>{"use strict";t.d(v,{y:()=>r});var n=t(19968),a=t(69372),c=t(28724);const g=`${232/16}rem`,p=(0,a.cp)(c.y)`
  width: ${g};
  background: ${({theme:d})=>d.colors.neutral100};
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
  border-right: 1px solid ${({theme:d})=>d.colors.neutral200};
  z-index: 1;
`,r=({ariaLabel:d,...m})=>(0,n.jsx)(p,{"aria-label":d,as:"nav",...m})},32016:(y,v,t)=>{"use strict";t.d(v,{C:()=>D});var n=t(19968),a=t(62552),c=t(85088),g=t(69372),p=t(89192),r=t(37856);const d=T=>{const W=(0,a.useRef)();return(0,a.useEffect)(()=>{W.current=T}),W.current};var m=t(6912),C=t(5e3),O=t(57064),P=t(86400),M=t(48936),x=t(63358),K=t(23264);const R=(0,g.cp)(m.c)`
  width: ${24/16}rem;
  background-color: ${({theme:T})=>T.colors.neutral200};
`,D=({as:T="h2",label:W,searchLabel:F="",searchable:N=!1,onChange:X=()=>{},value:k="",onClear:ot=()=>{},onSubmit:Q=()=>{},id:et})=>{const[J,at]=(0,a.useState)(!1),it=d(J),ut=(0,r.I)(et),b=(0,a.useRef)(void 0),V=(0,a.useRef)(void 0);(0,a.useEffect)(()=>{J&&b.current&&b.current.focus(),it&&!J&&V.current&&V.current.focus()},[J,it]);const gt=()=>{at(H=>!H)},pt=H=>{ot(H),b.current.focus()},ht=H=>{H.relatedTarget?.id!==ut&&at(!1)},Et=H=>{H.key===p._.ESCAPE&&at(!1)};return J?(0,n.jsxs)(C.k,{paddingLeft:4,paddingTop:5,paddingBottom:2,paddingRight:4,children:[(0,n.jsx)(O.y,{children:(0,n.jsx)(P.E,{name:"searchbar",value:k,onChange:X,placeholder:"e.g: strapi-plugin-abcd",onKeyDown:Et,ref:b,onBlur:ht,onClear:pt,onSubmit:Q,clearLabel:"Clear",size:"S",children:F})}),(0,n.jsx)(C.k,{paddingLeft:2,paddingTop:4,children:(0,n.jsx)(R,{})})]}):(0,n.jsxs)(C.k,{paddingLeft:6,paddingTop:6,paddingBottom:2,paddingRight:4,children:[(0,n.jsxs)(M.C,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,n.jsx)(x.O,{variant:"beta",as:T,children:W}),N&&(0,n.jsx)(K.w,{ref:V,onClick:gt,label:F,icon:(0,n.jsx)(c.c,{})})]}),(0,n.jsx)(C.k,{paddingTop:4,children:(0,n.jsx)(R,{})})]})}},89976:(y,v,t)=>{"use strict";t.d(v,{w:()=>M});var n=t(19968),a=t(62552),c=t(65816),g=t(69372),p=t(5e3),r=t(63358),d=t(48936),m=t(29176);const C=(0,g.cp)(p.k)`
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-decoration: none;
  color: ${({theme:x})=>x.colors.neutral800};
  svg > * {
    fill: ${({theme:x})=>x.colors.neutral600};
  }

  &.active {
    ${({theme:x})=>`
      background-color: ${x.colors.primary100};
      border-right: 2px solid ${x.colors.primary600};
      svg > * {
        fill: ${x.colors.primary700};
      }
      ${r.O} {
        color: ${x.colors.primary700};
        font-weight: 500;
      }
      `}
  }

  &:focus-visible {
    outline-offset: -2px;
  }
`,O=(0,g.cp)(c.c)`
  width: ${12/16}rem;
  height: ${4/16}rem;
  * {
    fill: ${({theme:x,$active:K})=>K?x.colors.primary600:x.colors.neutral600};
  }
`,P=g.cp.div`
  svg {
    height: ${12/16}rem;
    width: ${12/16}rem;
  }
`,M=a.forwardRef(({children:x,icon:K=null,withBullet:R=!1,as:D=m.k,isSubSectionChild:T=!1,...W},F)=>(0,n.jsxs)(C,{as:D,icon:K,background:"neutral100",paddingLeft:T?9:7,paddingBottom:2,paddingTop:2,ref:F,...W,children:[(0,n.jsxs)(d.C,{children:[K?(0,n.jsx)(P,{children:K}):(0,n.jsx)(O,{}),(0,n.jsx)(p.k,{paddingLeft:2,children:(0,n.jsx)(r.O,{as:"span",children:x})})]}),R&&(0,n.jsx)(p.k,{as:d.C,paddingRight:4,children:(0,n.jsx)(O,{$active:!0})})]}))},3240:(y,v,t)=>{"use strict";t.d(v,{A:()=>K});var n=t(19968),a=t(62552),c=t(69372),g=t(14520),p=t(48936),r=t(5e3),d=t(63358);const m=(0,c.cp)(p.C)`
  border: none;
  padding: 0;
  background: transparent;
`,C=c.cp.div`
  display: flex;
  align-items: center;
  transform: rotateX(${({rotated:R})=>R?"0deg":"180deg"});
`,O=({collapsable:R=!1,label:D,onClick:T=()=>{},ariaExpanded:W,ariaControls:F})=>R?(0,n.jsxs)(m,{as:"button",onClick:T,"aria-expanded":W,"aria-controls":F,textAlign:"left",children:[(0,n.jsx)(r.k,{paddingRight:1,children:(0,n.jsx)(d.O,{variant:"sigma",textColor:"neutral600",children:D})}),R&&(0,n.jsx)(C,{rotated:W,children:(0,n.jsx)(g.c,{"aria-hidden":!0})})]}):(0,n.jsx)(m,{children:(0,n.jsx)(r.k,{paddingRight:1,children:(0,n.jsx)(d.O,{variant:"sigma",textColor:"neutral600",children:D})})});var P=t(37856),M=t(37976);const x=(0,c.cp)(r.k)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:R})=>R.colors.neutral500};
    }
  }
`,K=({collapsable:R=!1,label:D,badgeLabel:T,children:W,id:F})=>{const[N,X]=(0,a.useState)(!0),k=(0,P.I)(F),ot=()=>{X(Q=>!Q)};return(0,n.jsxs)(p.C,{direction:"column",alignItems:"stretch",gap:1,children:[(0,n.jsx)(x,{paddingLeft:6,paddingTop:2,paddingBottom:2,paddingRight:4,children:(0,n.jsxs)(r.k,{position:"relative",paddingRight:T?6:0,children:[(0,n.jsx)(O,{onClick:ot,ariaExpanded:N,ariaControls:k,collapsable:R,label:D}),T&&(0,n.jsx)(M.k,{backgroundColor:"neutral150",textColor:"neutral600",position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",children:T})]})}),(!R||N)&&(0,n.jsx)("ol",{id:k,children:a.Children.map(W,(Q,et)=>(0,n.jsx)("li",{children:Q},et))})]})}},87320:(y,v,t)=>{"use strict";t.d(v,{I:()=>p});var n=t(19968),a=t(62552),c=t(5e3),g=t(48936);const p=({children:r,spacing:d=2,horizontal:m=!1,...C})=>(0,n.jsx)(c.k,{paddingTop:2,paddingBottom:4,children:(0,n.jsx)(g.C,{as:"ol",gap:d,direction:m?"row":"column",alignItems:m?"center":"stretch",...C,children:a.Children.map(r,(O,P)=>(0,n.jsx)("li",{children:O},P))})})},65816:(y,v,t)=>{"use strict";t.d(v,{c:()=>c});var n=t(19968);const a=g=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 4 4",...g,children:(0,n.jsx)("rect",{width:4,height:4,fill:"#A5A5BA",rx:2})}),c=a},73560:(y,v,t)=>{"use strict";t.d(v,{c:()=>c});var n=t(19968);const a=g=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...g,children:(0,n.jsx)("path",{fill:"#8E8EA9",d:"M19 10h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V11a1 1 0 0 1 1-1h1V9a7 7 0 0 1 14 0v1Zm-2 0V9A5 5 0 0 0 7 9v1h10Zm-6 4v4h2v-4h-2Z"})}),c=a}}]);
